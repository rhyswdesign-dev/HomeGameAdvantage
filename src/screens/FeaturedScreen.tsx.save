import { ScrollView, View, Text } from 'react-native';
import { colors, spacing } from '../theme/tokens';
import SectionHeader from '../components/SectionHeader';
import Chip from '../components/Chip';
import { WideCard, SquareCard, GameTile, HeroCard, ToolPromo, VideoCard, SpotlightCard } from '../components/Cards';
import { useNavigation } from '@react-navigation/native';
import type { NativeStackNavigationProp } from '@react-navigation/native-stack';
import type { RootStackParamList } from '../navigation/RootNavigator';

const chips = ['Spirits','Bars','Events','Games'];

const IMGS = {
  whiskey: 'https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?q=80&w=1200&auto=format&fit=crop',
  vodka:   'https://images.unsplash.com/photo-1551022372-0bdac482b9d8?q=80&w=1200&auto=format&fit=crop',
  tequila: 'https://images.unsplash.com/photo-1620325867503-2e8b5d0a5b90?q=80&w=1200&auto=format&fit=crop',
  rum:     'https://images.unsplash.com/photo-1497534446932-c925b458314e?q=80&w=1200&auto=format&fit=crop',
  bourbon: 'https://images.unsplash.com/photo-1567306226416-28f0efdc88ce?q=80&w=1200&auto=format&fit=crop',
  gin:     'https://images.unsplash.com/photo-1542843137-4b8b2f9d7690?q=80&w=1200&auto=format&fit=crop',

  cozyBar: 'https://images.unsplash.com/photo-1555396273-367ea4eb4db5?q=80&w=1200&auto=format&fit=crop',
  socialBar: 'https://images.unsplash.com/photo-1554118811-1e0d58224f24?q=80&w=1200&auto=format&fit=crop',
  speakeasy: 'https://images.unsplash.com/photo-1543002588-bfa74002ed7e?q=80&w=1200&auto=format&fit=crop',
  rooftop: 'https://images.unsplash.com/photo-1512917774080-9991f1c4c750?q=80&w=1200&auto=format&fit=crop',
  live: 'https://images.unsplash.com/photo-1483412033650-1015ddeb83d1?q=80&w=1200&auto=format&fit=crop',
  lab: 'https://images.unsplash.com/photo-1542831371-d531d36971e6?q=80&w=1200&auto=format&fit=crop',

  masterclass: 'https://images.unsplash.com/photo-1551537482-f2075a1d41f2?q=80&w=1200&auto=format&fit=crop',
  barTools: 'https://images.unsplash.com/photo-1524592869810-6f6a7f3b1ae5?q=80&w=1200&auto=format&fit=crop',
  video1: 'https://images.unsplash.com/photo-1506818144585-74b29c980d4b?q=80&w=1200&auto=format&fit=crop',
  video2: 'https://images.unsplash.com/photo-1560518883-ce09059eeffa?q=80&w=1200&auto=format&fit=crop',
  avatar: 'https://images.unsplash.com/photo-1544006659-f0b21884ce1d?q=80&w=240&h=240&auto=format&fit=crop',
};

export default function FeaturedScreen() {
  const nav = useNavigation<NativeStackNavigationProp<RootStackParamList>>();

  const brandPicks = [
    { key:'Whiskey Wonders', img: IMGS.whiskey, subtitle:'Featured in Classic Cocktails' },
    { key:'Vodka Visions',   img: IMGS.vodka,   subtitle:'Crystal Clear Classics' },
    { key:'Tequila Treasures', img: IMGS.tequila, subtitle:'Agave Forward' },
    { key:'Rum Rhapsody',    img: IMGS.rum,     subtitle:'Tropical Staples' },
    { key:'Bourbon Beauties',img: IMGS.bourbon, subtitle:'Rich & Robust' },
    { key:'Gin Gems',        img: IMGS.gin,     subtitle:'Refreshing Mixers' },
  ];

  const barThemes = [
    { key:'Relaxed & Cozy', img: IMGS.cozyBar },
    { key:'Energetic & Social', img: IMGS.socialBar },
    { key:'Speakeasy Vibes', img: IMGS.speakeasy },
    { key:'Rooftop Views', img: IMGS.rooftop },
    { key:'Live Music', img: IMGS.live },
    { key:'Cocktail Lab', img: IMGS.lab },
  ];

  return (
    <ScrollView style={{ flex:1, backgroundColor: colors.card, paddingTop: spacing(2) }}>
        {chips.map((c, i) => (
          <Chip
            key={c}
            label={c}
            selected={i===0}
            onPress={() => {
              if (c === 'Bars') nav.navigate('Bars');
              if (c === 'Spirits') nav.navigate('Spirits');
            }}
          />
        ))}
      </ScrollView>

      {/* Featured Brand Picks — tap title to go to Spirits */}
      <SectionHeader title="Featured Brand Picks" onPress={() => nav.navigate('Spirits')} />
      <ScrollView horizontal showsHorizontalScrollIndicator={false}
        style={{ paddingHorizontal: spacing(2) }}>
        {brandPicks.map(b => (
          <WideCard
            key={b.key}
            image={b.img}
            title={b.key}
            subtitle={b.subtitle}
            onPress={() => nav.navigate('Brand', { brand: b.key })}
          />
        ))}
      </ScrollView>

      {/* Featured Bar Picks — tap title to go to Bars */}
      <SectionHeader title="Featured Bar Picks" onPress={() => nav.navigate('Bars')} />
      <ScrollView horizontal showsHorizontalScrollIndicator={false}
        style={{ paddingHorizontal: spacing(2) }}>
        {barThemes.map(t => (
          <SquareCard
            key={t.key}
            image={t.img}
            title={t.key}
            onPress={() => nav.navigate('BarTheme', { theme: t.key })}
          />
        ))}
      </ScrollView>

      {/* Upcoming Events */}
      <SectionHeader title="Upcoming Events" />
      <View style={{ paddingHorizontal: spacing(2), gap: spacing(1.5) }}>
        <HeroCard image={IMGS.masterclass} title="Live at The Alchemist This Weekend"
          subtitle="Sponsored • Powered by Legacy" cta="Learn More" />
      </View>

      {/* Featured Games */}
      <SectionHeader title="Featured Games" />
      <ScrollView horizontal showsHorizontalScrollIndicator={false}
        style={{ paddingHorizontal: spacing(2) }}>
        <GameTile title="MixMaster Challenge" difficulty="Medium" icon="pie-chart-outline" />
        <GameTile title="Speedy Sips" difficulty="Easy" icon="stopwatch-outline" />
      </ScrollView>

      {/* Tools / Videos / Spotlight */}
      <View style={{ paddingHorizontal: spacing(2), marginTop: spacing(2) }}>
        <ToolPromo image={IMGS.barTools} title="Premium Bar Tools"
          subtitle="Equip your home bar with professional-grade gear." />
      </View>

      <SectionHeader title="Bartending Hack Videos" />
      <View style={{ paddingHorizontal: spacing(2), flexDirection:'row', justifyContent:'space-between' }}>
        <VideoCard image={IMGS.video1} title="Perfect Pour Techniques" duration="2 min" />
        <VideoCard image={IMGS.video2} title="Garnish Like a Pro" duration="3 min" />
      </View>

      <SectionHeader title="Bartender Spotlight" />
      <View style={{ paddingHorizontal: spacing(2) }}>
        <SpotlightCard
          avatar={IMGS.avatar}
          name="Ava Sterling"
          bio="London, UK • Favorite Bar: Untitled • Signature Drink: The Mélange à trois"
        />
      </View>
    </ScrollView>
